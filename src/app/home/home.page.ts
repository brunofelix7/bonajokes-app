import { JokesService } from './../services/jokes.service';
import { Component } from '@angular/core';

@Component({
  selector: 'app-home',
  templateUrl: 'home.page.html',
  styleUrls: ['home.page.scss'],
})
export class HomePage {

  piada: any;
  url: string;
  valorInput: string;
  piadas: any[];
  piadasFiltradas: any[];

  constructor(private service: JokesService) { 
    this.url = 'data:image/jpeg;base64,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';
  }

  showJokes() {
    this.service.getAllJokes().subscribe(piadas => {
      this.piada = piadas[this.indexAleatorio(piadas)];
    }, error => {
      console.log(error);
    },() => {
      console.log('sucesso');
    });
  }

  getJokers() {
    this.service.getAllJokes().subscribe(data => {
      this.piadas = data;
      this.piadasFiltradas = this.piadas.filter(item => {
        if(item.pergunta.toUpperCase().match(this.valorInput.toUpperCase())) {
          return item;
        }
      });
    });
  }

  indexAleatorio(piadas) {
    const index = Math.floor(Math.random() * piadas.length + 1);
    return index;
  }

}
